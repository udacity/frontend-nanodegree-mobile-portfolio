// Generated by CoffeeScript 1.9.1
(function() {
  var typeChecker;

  typeChecker = require('typechecker');

  module.exports = function(opts, next, config) {
    var completionCallbackName, i, len, ref;
    if (config == null) {
      config = {};
    }
    if ((config.completionCallbackNames != null) === false) {
      config.completionCallbackNames = ['next'];
    } else if (typeChecker.isArray(config.completionCallbackNames) === false) {
      config.completionCallbackNames = [config.completionCallbackNames];
    }
    if (typeChecker.isFunction(opts) && (next != null) === false) {
      next = opts;
      opts = {};
    } else {
      opts || (opts = {});
    }
    if (!next) {
      ref = config.completionCallbackNames;
      for (i = 0, len = ref.length; i < len; i++) {
        completionCallbackName = ref[i];
        next = opts[completionCallbackName];
        delete opts[completionCallbackName];
        if (next) {
          break;
        }
      }
    }
    next || (next = null);
    return [opts, next];
  };

}).call(this);
